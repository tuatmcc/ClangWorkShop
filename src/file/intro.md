# ファイル入出力

C 言語のプログラムでは、ファイルの作成や読み込み、書き込みを行うことができます。ファイルを書き込むことで、プログラムの実行結果を保存したり、ファイルからデータを読み込んで処理を行うことができます。

## ファイルの読み込み

ファイルの読み込みには、`fopen` 関数を使用します。`fopen` 関数は、ファイルを開いてファイルポインタを返します。第一引数にファイル名、第二引数にファイルのモードを指定します。モードには、読み込みモード `"r"`、書き込みモード `"w"`、追記モード `"a"` などがあります。ファイルポインタは、ファイルの読み書き位置を管理するための構造体です。ファイルポインタから、文字列を読み込むためには `fscanf` 関数を使用します。以下に、ファイルを読み込むプログラムの例を示します。

```c
#include <stdio.h>

int main()
{
    FILE *fp;
    char str[256];

    fp = fopen("input.txt", "r");

    fscanf(fp, "%s", str);

    printf("%s\n", str);

    fclose(fp);
}
```

実行する前に、`input.txt` というファイルを作成し、適当な文字列を書き込んでおいてください。プログラムを実行すると、ファイルから読み込んだ文字列が表示されます。

例として、`input.txt` に以下の文字列を書き込んだ場合、プログラムの実行結果は以下のようになります。

```txt
Hello,TUAT!
```

```txt
Hello,TUAT!
```

## ファイルの書き込み

ファイルの書き込みには、`fopen` 関数を使用します。`fopen` 関数は、ファイルを開いてファイルポインタを返します。第一引数にファイル名、第二引数にファイルのモードを指定します。モードには、読み込みモード `"r"`、書き込みモード `"w"`、追記モード `"a"` などがあります。ファイルポインタは、ファイルの読み書き位置を管理するための構造体です。ファイルポインタに、文字列を書き込むためには `fprintf` 関数を使用します。以下に、ファイルに書き込むプログラムの例を示します。

```c
#include <stdio.h>

int main()
{
    FILE *fp;

    fp = fopen("output.txt", "w");

    fprintf(fp, "Hello,TUAT!\n");

    fclose(fp);
}
```

プログラムを実行すると、`output.txt` というファイルが作成され、`Hello,TUAT!` という文字列が書き込まれます。

## ファイルの追記

ファイルの追記には、`fopen` 関数を使用します。`fopen` 関数は、ファイルを開いてファイルポインタを返します。第一引数にファイル名、第二引数にファイルのモードを指定します。モードには、読み込みモード `"r"`、書き込みモード `"w"`、追記モード `"a"` などがあります。ファイルポインタは、ファイルの読み書き位置を管理するための構造体です。ファイルポインタに、文字列を書き込むためには `fprintf` 関数を使用します。以下に、ファイルに追記するプログラムの例を示します。

```c
#include <stdio.h>

int main()
{
    FILE *fp;

    fp = fopen("output.txt", "a");

    fprintf(fp, "Hello,TUAT!\n");

    fclose(fp);
}
```

プログラムを実行すると、`output.txt` というファイルに、`Hello,TUAT!` という文字列が追記されます。

ファイルモードが `"w"` の場合、ファイルが存在する場合は上書きされます。ファイルモードが `"a"` の場合、ファイルが存在する場合は末尾に追記されます。
